<html>
<head>
	  <title>collectiv</title>
  <link href="https://fonts.googleapis.com/css?family=Abel|Chathura|News+Cycle|Open+Sans+Condensed:300" rel="stylesheet">
  <link rel="stylesheet" href="./styles/normalize.css">

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
   <link rel="stylesheet" type="text/css" href="./styles/tooltipster.bundle.min.css" />
  <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/tooltipster-sideTip-light.min.css">
  <script
    src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar">
	<a href="#" class="toggle"><i class="fa fa-reorder"></i></a>
	<a href="#" class="brand">Collectiv</a>
	<div class="left">
	</div>
	<div class="right">
		<a href="signup.html" class="link">Sign Up </a>
		<a href=login.html class="link">Login </a>
	</div>
</nav>
<div class="upload-header"><h3>Create Collective</h3></div>
<div class="upload-container">
<form id="upload-collectiv-form" method="post" enctype="multipart/form-data" class="form">
	<div class="form-field"><div class="form-label tooltip" title="Title of Work">Title:</div>
	<div class="field-container">
		<input id="work-title" type="text" class="form-input" placeholder="Title" required>
	</div>
	</div>
	<div class="form-field">
		<div class="form-label artist-statement-label tooltip" title="Give a brief or lengthy statement about this piece.">Purpose Statement:</div>
	<div class="field-container">
		<p>A purpose statement allows artists to understand what type of work you are looking for while simultaneously inspiring creation of new pieces that fit the narrative of the Collective.</p>
		<textarea class="statement-input-collective">....</textarea>
	</div>
	</div>
	<div class="form-field">
		<div class="form-label">Visual Inspiration:</div>
		<div class="field-container">
			<p>
			Choose up to 5 images to represent ideas you would like to see in this Collective. Add a note for each uploaded image to further explain what in the image is relevant to the Collective. 	
			</p>
			<input id="fileupload" type="file" name="imgFile" class="">
		</div>
	</div>
	<div id="files"></div>
	<div class="form-field">
		<div class="form-label tooltip" title="Add descriptive terms about this work.">Tags:</div>
		<div class="field-container">
			<input type="text" class="form-input" placeholder="nature, organic, portrait"> 
		</div>
	</div>
	<div class="form-field">
		<div class="form-label tooltip">Allowed Mediums:</div>
		<div class="field-container">
			<div class="option-wrapper">
			<input class="" id="all" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">All Mediums</label>
		</div>
		<div class="option-wrapper">
			<input class="" id="drawing" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">Drawing</label>
		</div>
		<div class="option-wrapper">
			<input class="" id="painting" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">Painting</label>
		</div>
		<div class="option-wrapper">
			<input class="" id="painting" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">Photography</label>
		</div>
		<div class="option-wrapper">
			<input class="" id="printmaking" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">Printmaking</label>
		</div>
		<div class="option-wrapper">
			<input class="" id="sculpture" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">Sculpture</label>
		</div>
		<div class="option-wrapper">
			<input class="" id="interior" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">Interior</label>
		</div>
		<div class="option-wrapper">
			<input class="" id="fashion" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">Fashion</label>
		</div>
		<div class="option-wrapper">
			<input class="" id="mixedmedia" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl for="cbx">Mixed Media</label>
		</div>

		<div class="option-wrapper">
			<input class="" id="painting" type="checkbox" /><label class="cbx" for="cbx"></label><label class="lbl" for="cbx">Other</label>
		</div>
   
		</div>
</div>
	<div class="form-field">
		<div class="form-label tooltip" title="Make Uploaded Work visible to all users, or Curators only.">
			Privacy:
		</div>
		<div class="field-container">
			<div class="radio">
				<input type="radio" name="privacy" value="public" id="public"> <label for="public" class="underline radio-label">Members Only</label>
			</div>
			<div class="radio">
				<input type="radio" name="privacy" value="public" id="private"> <label for="public" class="underline radio-label">Public</label>
			</div>
		</div>
	</div>


		<div id="progress">
    		<div class="bar" style="width: 0%;"></div>
		</div>
			<div class="status">...</div>
		<hr>
	<div class="form-field">
		<button class="upload-work-submit">UPLOAD WORK</button>
	</div>
</form>
</div>
<script src="./js/jquery.ui.widget.js"></script>
<script src="./js/load-image.all.min.js"></script>
<script src="./js/load-image-meta.js"></script>
<script src="./js/canvas-to-blob.min.js"></script>
<script src="./js/jquery.iframe-transport.min.js"></script>
<script src="./js/jquery.fileupload.js"></script>
<script src="./js/jquery.fileupload-process.js"></script>
<script src="./js/jquery.fileupload-image.js"></script>
<script type="text/javascript" src="./js/tooltipster.bundle.min.js"></script>

<script>
// $(function () {
//     $('#fileupload').fileupload({
//     	method: 'post',
//     	url: '/api/work',
//     	enctype: 'multipart/form-data',
//     	processData: false,
//     	contentType: false,
//      	add: function (e, data){
//      		$.each(data.files, function (index, file) {
//      		 var progress = parseInt(data.loaded / data.total * 100, 10);
// 	        console.log(progress);
// 	        $('#progress .bar').css('width', progress + '%');
// 	        $('#progress .bar').css('background-color', 'green');
//         	console.log('Added file: ' + file.name);});
//     		data.url = '/api/work/';
//     		var jqXHR = data.submit()
// 	        .success(function (result, textStatus, jqXHR) {/* ... */})
// 	        .error(function (jqXHR, textStatus, errorThrown) {/* ... */})
// 	        .complete(function (result, textStatus, jqXHR) {/* ... */});
//      	}
//     });
// });

 $(function() {
 	$('.tooltip').tooltipster({
    theme: 'tooltipster-light',
     animation: 'fade',
   	 delay: 200,
	});
	$.tooltipster.setDefaults({
    side: 'left',
	});
   
 });


$("select").on("click" , function() {
  
  $(this).parent(".select-box").toggleClass("open");
  
});

$(document).mouseup(function (e)
{
    var container = $(".select-box");

    if (container.has(e.target).length === 0)
    {
        container.removeClass("open");
    }
});


$("select").on("change" , function() {
  
  var selection = $(this).find("option:selected").text(),
      labelFor = $(this).attr("id"),
      label = $("[for='" + labelFor + "']");
    
  label.find(".label-desc").html(selection);
    
});


$(function() {
		uploadButton = $('<button/>')
            .prop('disabled', true)
            .text('Processing...')
            .on('click', function () {
                var $this = $(this),
                    data = $this.data();
                $this
                    .off('click')
                    .text('Abort')
                    .on('click', function () {
                        $this.remove();
                        data.abort();
                    });
                data.submit().always(function () {
                    $this.remove();
                });
            });

	  $('#fileupload').fileupload({
	    method: 'post',
	    url: '/api/work',
	    autoUpload: false,
	    enctype: 'multipart/form-data',
	    processData: false,
	    contentType: false,
	    previewMaxWidth: 550,
	    previewMaxHeight: 550,
	    maxNumberOfFiles: 1,
	   	loadImageMaxFileSize: 99999999999999999000,
	    disableImageResize: /Android(?!.*Chrome)|Opera/
            .test(window.navigator.userAgent),
        previewCrop: false,

	  }).on('fileuploadadd', function (e, data) {
	        data.context = $('<div/>').addClass('fadeInUp').appendTo('#files');
	        $.each(data.files, function (index, file) {
	            var node = $('<p/>')
	                    .append($('<div/>').text(file.name));
	            if (!index) {
	                node
	                    .append('<br>')
	            }
	            node.appendTo(data.context);
	            console.log(data.files);
	        });
	    }).on('fileuploadprocessalways', function (e, data) {
	        var index = data.index,
	            file = data.files[index],
	            node = $(data.context.children()[index]);
	            console.log(file);
	        if (file.preview) {
	        	console.log(file.preview);
	        	console.log(file);
	            node
	                .prepend('<br><br>')
	                .prepend(file.preview);
	        }
	        if (file.error) {
	            node
	                .append('<br>')
	                .append($('<span class="text-danger"/>').text(file.error));
	        }
	        if (index + 1 === data.files.length) {
	            data.context.find('button')
	                .text('Upload')
	                .prop('disabled', !!data.files.error);
	        }
	    }).on('fileuploadprogressall', function (e, data) {
        var progress = parseInt(data.loaded / data.total * 100, 10);
        console.log(progress)
        $('#progress .bar').css(
            'width',
            progress + '%'
        );
    }).on('fileuploaddone', function (e, data) {
        $.each(data.result.files, function (index, file) {
            if (file.url) {
                var link = $('<a>')
                    .attr('target', '_blank')
                    .prop('href', file.url);
                $(data.context.children()[index])
                    .wrap(link);
            } else if (file.error) {
                var error = $('<span class="text-danger"/>').text(file.error);
                $(data.context.children()[index])
                    .append('<br>')
                    .append(error);
            }
        });
    }).on('fileuploadfail', function (e, data) {
        $.each(data.files, function (index) {
            var error = $('<span class="text-danger"/>').text('File upload failed.');
            $(data.context.children()[index])
                .append('<br>')
                .append(error);
        });
    }).prop('disabled', !$.support.fileInput)
        .parent().addClass($.support.fileInput ? undefined : 'disabled');
});



</script>
</body>
</html>